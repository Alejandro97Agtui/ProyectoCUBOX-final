<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Detalle Compra - CUBOX</title>

	<!-- Bootstrap 5 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Iconos FontAwesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

	<!-- librerÃ­a Sweetalert -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<!-- Estilos personalizados -->
	<style>
		body {
			background: #f8f9fa;
		}

		.card {
			border-radius: 15px;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
			border: none;
		}

		h1 {
			font-weight: bold;
			color: #0d6efd;
		}

		label {
			font-weight: 500;
		}

		.btn-primary {
			padding: 10px;
			font-size: 16px;
			font-weight: 500;
		}

		@media (max-width : 576px) {
			h1 {
				font-size: 1.5rem;
				text-align: center;
			}
		}
	</style>
</head>

<body>

	<div class="container py-5">
		<div class="card p-4">
			<h1 class="mb-4">
				<i class="fa-solid fa-user-plus"></i> Ver Detalle de la Compra
			</h1>
			
			<!-- th:object se mantiene, pero para ciertos campos de solo lectura usamos th:value -->
			<form action="" method="post" enctype="multipart/form-data" th:object="${pedido}">

				<div class="row mb-3">
					<div class="col-md-6" style="padding-bottom: 12px;">
						<div class="form-floating mb-3 mb-md-0">
							<input th:field="*{numPed}" class="form-control" type="text" name="numeroPedido" readonly/>
							<label>Nro Pedido</label>
						</div>
					</div>
					<div class="col-md-6" style="padding-bottom: 12px;">
						<div class="form-floating mb-3 mb-md-0">
							<input th:field="*{fchPed}" class="form-control" type="text" name="fechaPedido" readonly/>
							<label>Fecha Pedido</label>
						</div>
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-md-6" style="padding-bottom: 12px;">
						<div class="form-floating mb-3 mb-md-0">
							<!-- Usamos th:value con la propiedad del objeto pedido para evitar errores de binding con th:field-->
							<input th:value="${pedido.usuario.nombre}" class="form-control" type="text" name="nombreUsuario" readonly/>
							<label>Usuario</label>
						</div>
					</div>
					<div class="col-md-6" style="padding-bottom: 12px;">
						<div class="form-floating mb-3 mb-md-0">
							<!-- Si quieres formato en el total, usa #numbers -->
							<input th:value="${'S/. '} + ${#numbers.formatDecimal(pedido.total, 1, 'COMMA', 2, 'POINT')}" class="form-control" type="text" name="totalVenta" readonly/>
							<label>Total Venta</label>
						</div>
					</div>
				</div>
				
				<!-- Detalle Pedido -->
				<div class="table-responsive">
					<table id="datatablesSimple" class="table table-striped table-hover table-bordered align-middle">
						<thead class="table-dark">
							<tr>
								<!--<th>ID</th>-->
								<th>Nro Pedido</th>
								<th>Producto</th>
								<th>Cantidad</th>
								<th>Precio unitario</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="d : ${lstDetalles}">
								<!--<td th:text="${d.id}">1</td>-->
								<td th:text="${d.cabecera.numPed}">T-20XX-XXXXXXXXXX-XXXX</td>
								<td th:text="${d.producto.nombre}">XXX</td>
								<td th:text="${d.cantidad}">XXX</td>
								<td th:text="${'S/ '} + ${#numbers.formatDecimal(d.precio, 1, 'COMMA', 2, 'POINT')}">S/. XXX</td>
							</tr>
						</tbody>
					</table>

				<div style="margin: 15px 0px">
					<a th:href="@{/pedidos/mostrar}" type="button" class="btn btn-info">Regresar a compras</a>
				</div>

			</form>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>